<!DOCTYPE html>
{%load static%}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
    {%block title%}
    {%endblock%} 
    </title>
    <link rel="shortcut icon" type="image/png" href={%static "images/category/l.png"%}/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500&family=PT+Sans:wght@400;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Berkshire+Swash&family=Kalam&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Amita&family=Anton&family=Bebas+Neue&family=Berkshire+Swash&family=Bubblegum+Sans&family=Bungee&family=Bungee+Inline&family=Bungee+Shade&family=Dancing+Script:wght@400;500&family=Fredericka+the+Great&family=Just+Me+Again+Down+Here&family=Kalam&family=Lobster+Two&family=Lora:ital,wght@0,400;0,500;0,600;1,400&family=Metal+Mania&family=Monofett&family=Montserrat:wght@300;400&family=Oswald:wght@400;600&family=PT+Sans&family=Pacifico&family=Permanent+Marker&family=Poppins:wght@300;400;500&family=Press+Start+2P&family=Roboto+Slab:wght@300;400;500&family=Roboto:wght@300;400&family=Rock+Salt&family=Rubik+Mono+One&family=Sarpanch&family=Satisfy&family=Shadows+Into+Light&family=Tourney&display=swap" rel="stylesheet">
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"

  />
  <link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet">

    <link rel="stylesheet" href="{%static "styles/base.css"%}?{% now "U" %}">
    {%block styles%}
    {%endblock%}
</head>
<body>



<!-- ======================header starts============================================ -->
<header>
        <div class="when_sm">
            <div class="menu__ real_mn">
                <span class="material-icons"> menu </span>
                <!-- <span class="material-icons">drag_handle </span> -->
            </div>
            <div class="menu__ real_mn_drag">
                <span class="material-icons">drag_handle </span>
            </div>
            <h1 style="position: relative;">
                <a href="{%url "index"%}"> <span><span class="big">M</span><span class="small">OTIVATIVE</span><span class="big">Q</span><span class="small">UOTES</span></span> <img style="position: absolute;top: -5px;" src="{%static "images/category/l.png"%}" alt="motivative quotes logo" height="35px">  </a>
            </h1>
        </div>
        
        <nav>
            <ul class="big_nav">
                <li><a href="{%url "quote-of-the-day"%}">Quote of the Day</a></li>
                <li><a href="{%url "quote-maker"%}">Quote Maker</a></li>
                <li><a href="{%url "all-blogs"%}">Blog</a></li>
                <li><a href="{%url "contact"%}">Contact Us</a></li> 
            </ul> 
        </nav>  
        <div class="menu__ sh">
            <span class="material-icons"> search </span>
        </div>

        <div class="auth_side">
           {% if user.is_authenticated %}
            <p class="login">Hey, {{user.username}}</p>
            <p class="signup" onclick="logout()">Logout</p>
            {% else %}
                <p class="login loginnn">Login</p>
                <p class="signup signupp">Signup</p>
            {%endif%}
        </div>
       
</header>

<div class="miniHeader">

    <nav>
        <ul class="small_nav">
            <li><a href="{%url "quote-of-the-day"%}">Quote of the Day</a></li>
            <li><a href="{%url "quote-maker"%}">Quote Maker</a></li>
            <li><a href="{%url "all-blogs"%}">Blog</a></li>
            <li><a href="{%url "contact"%}">Contact Us</a></li> 
        </ul> 
    </nav> 

    <div></div>

</div>
<!-- ==============================header ends================================================ -->

{% if messages %} 
<div class="alert__box">
    <section>
        <i class="fas fa-times"></i>
{% for message in messages %}
        <p class="{{message.tags}} alert__p">{{message}}</p>
{% endfor %}
    </section>
      
</div>
{% endif %}


<!-- login and signup================================== -->
<div class="main_auth_section">

    <div class="auth_section">
    <i class="fas fa-times top_right"></i>


         <section class="form_section">

        <form  id="loginForm" >
            {%csrf_token%}

        <h2 class="welcome">Good Morning! <span> login to your account</span></h2>

        <p style="color: red;font-weight: bold;font-size: 14px;"  class="backErr"></p>

       <p class="icon__">
        <input required type="text" placeholder="Email or Username" name="username" class="username">
        <i class="fas fa-user"></i>
       </p>
        
        <p class="userError">Username required</p>
        
        <p class="icon__">
        <input required type="password" placeholder="Password" name="password" class="password">
        <i class="fas fa-lock"></i>
        </p>
        
        <p class="passError">Password required</p>

        <p class="forget_pass"><a href="">Forget password?</a></p>
        <input required type="submit" class="login_btn" value="Login">
        
        <p class="signup_inc">Don't have an account? <a class="signup_ su__">Signup</a></p>
            
        </form>

        <form  id="signupForm" >
            {%csrf_token%}

        <h2 class="welcome">Good Morning! <span> Signup and explore more content</span></h2>

        
        <p class="userError">Please fill all the fields</p>
        <p style="color: red;font-weight: bold;font-size: 14px;"  class="backErr2"></p>

       <p class="icon__">
        <input required type="text" placeholder="Username" name="username" class="username">
        <i class="fas fa-user"></i>
       </p>
        
        

        <p class="icon__">
            <input required type="text" placeholder="Email" name="email" class="username s_email">
            <i class="fas fa-envelope"></i>
           </p>
            
        <p class="emailError">Email required</p>
        <p class="icon__">
        <input required type="password" placeholder="Password" name="password" class="password">
        <i class="fas fa-lock"></i>
        </p>
        
        <p class="passError">Password required</p>

        <input required type="submit" class="login_btn" value="Signup">
        
        <p class="signup_inc">Already have an account? <a class="signup_ ln__">Login</a></p>
            
        </form>
        
        </section> 

    </div>

</div>
<!-- login and signup ends================================== -->





{%block mainContent%}
{%endblock%}

<div class="loader">

</div>
  
<!-- ======================footer===================================== -->
<footer>

    <div class="logo_quote">
        <!-- <h2> <a href="{%url "index"%}"> <span class="big">M</span><span class="small">OTIVATIVE</span><span class="big">Q</span><span class="small">UOTESðŸ¥° </span> </a></h2> -->
        <h2 style="position: relative;"> <a href="{%url "index"%}"> <span><span class="big">M</span><span class="small">OTIVATIVE</span><span class="big">Q</span><span class="small">UOTES</span></span> <img style="position: absolute;top: -5px;" src="{%static "images/category/l.png"%}" alt="motivative quotes logo" height="35px">  </a></h2>

        <p>Work until your bank account looks like a phone number.</p>
        
    </div>


    <div class="site_links">
    <h3>Links</h3>
    <a href="{%url "contact"%}">Contact Us</a>
    <a href="">Sitemap</a>    
    <a href="">Privacy Policy</a>    
    </div>


    <div class="connect_us">
    <h3>Follow us on social media</h3>
    <div class="socials">
    <a href=""><i class="fab fa-facebook-square"></i></a>
    <a href=""><i class="fab fa-instagram"></i></a>
    <a href=""><i class="fab fa-youtube"></i></a>
    </div>
    
    </div>

</footer>
<!-- ==============footer end========================================= -->


{%block myscript%}
{%endblock%}
<script>
    try{
document.querySelector(".alert__box i").addEventListener('click',()=>{
    document.querySelector(".alert__box").style.display="none"
})
}
catch{
}

try{
    const registration = document.querySelector(".main_auth_section")

const loginForm = document.querySelector("#loginForm")
const signupForm = document.querySelector("#signupForm")
    document.querySelector(".top_right").addEventListener("click",()=>{
       registration.style.display="none"
       loginForm.style.display="none"
       signupForm.style.display="none"
   })
}
catch(e){}

function logout(){
    window.location.href="/logout"
}

const menu = document.querySelector('.real_mn')
const header = document.querySelector('.miniHeader')
const menuDrag = document.querySelector('.real_mn_drag')
const menuSide = document.querySelector('.miniHeader div')

menu.addEventListener('click',()=>{
    header.style.display='flex'
    menuDrag.style.display='flex'
    menu.style.display='none'
})

menuDrag.addEventListener('click',()=>hideMenu())
menuSide.addEventListener('click',()=>hideMenu())

const hideMenu = ()=>{
    header.style.display='none'
    menuDrag.style.display='none'
    menu.style.display='flex'
}

</script>

<script>

    try{

        const loginForm = document.getElementById("loginForm")
        const signupForm = document.getElementById("signupForm")

        //login details
        const l_uname = document.querySelector("#loginForm .username")
        const l_pass = document.querySelector("#loginForm .password")

        //signup details
        const s_uname = document.querySelector("#signupForm .username")
        const s_email = document.querySelector("#signupForm .s_email")
        const s_pass = document.querySelector("#signupForm .password")

        loginForm.addEventListener('submit',async(e)=>{
           e.preventDefault()

            const res = await  fetch('/login',{
                method:'POST',
                headers:{
                    'Content-Type':'application/json',
                    "X-CSRFToken": "{{csrf_token}}"
                },
                body:JSON.stringify({
                    username:l_uname.value,
                    password:l_pass.value
                })
            })
            const data = await res.json()
            if(data?.status==="success"){
                window.location.href="/"
            }
            else{
                document.querySelector(".backErr").innerHTML=data.status
                setTimeout(()=>{
                    document.querySelector(".backErr").innerHTML=""
                },2000)
            }
        })
    
        signupForm.addEventListener('submit',async(e)=>{
           e.preventDefault()

            const res = await  fetch('/signup',{
                method:'POST',
                headers:{
                    'Content-Type':'application/json',
                    "X-CSRFToken": "{{csrf_token}}"
                },
                body:JSON.stringify({
                    username:s_uname.value,
                    password:s_pass.value,
                    email:s_email.value
                })
            })
            const data = await res.json()
            if(data?.status==="success"){
                window.location.href="/"
            }
            else{
                document.querySelector(".backErr").innerHTML=data.status
                setTimeout(()=>{
                    document.querySelector(".backErr").innerHTML=""
                },2000)
            }
        })

    }catch(e){}


    try{

    const loginBtn = document.querySelector(".loginnn")
   const signupBtn = document.querySelector(".signupp")
   const su = document.querySelector(".su__")
   const ln = document.querySelector(".ln__")

   const registration = document.querySelector(".main_auth_section")

   const loginForm = document.querySelector("#loginForm")
   const signupForm = document.querySelector("#signupForm")

   
   loginBtn.addEventListener("click",()=>{
       registration.style.display="flex"
       loginForm.style.display="block"
       signupForm.style.display="none"
   })


   signupBtn.addEventListener("click",()=>{
       registration.style.display="flex"
       loginForm.style.display="none"
       signupForm.style.display="block"
   })

   ln.addEventListener("click",()=>{
       registration.style.display="flex"
       loginForm.style.display="block"
       signupForm.style.display="none"
   })


   su.addEventListener("click",()=>{
       registration.style.display="flex"
       loginForm.style.display="none"
       signupForm.style.display="block"
   })

 

    }
    catch(e){}


   
</script>

</body>
</html>